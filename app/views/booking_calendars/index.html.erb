<div>
  <%= month_calendar table: {class: "table table-bordered"}, previous_link: previous_link, next_link: next_link, events: @booking_calendars do |date, bookings| %>
    <%= date %>
    <% if bookings.present? %>
      <%= link_to 'Unavailable', '#', class: 'btn btn-link btn-block', disabled: true %>
    <% else %>
      <%= link_to 'Available', "#", class: 'btn btn-link btn-block btn-form', data: { date:  "#{date}" }  %>
    <% end %>
  <% end %>
</div>
<div class="modal fade">
  <div class="modal-dialog">
    <%= form_for @booking, html: { class: 'form-horizontal' } do |f| %>
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">Reserve</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <div class="col-xs-12">
              <%= f.email_field :email, class: 'form-control', placeholder: 'Email' %>
            </div>
          </div>
          <div class="form-group">
            <div class="col-xs-12">
              <%= f.text_field :contact_no, class: 'form-control', placeholder: 'Contact No (Optional)' %>
            </div>
          </div>
          <div class="input-daterange input-group">
            <%= f.text_field :start_date, class: 'input-sm form-control datepicker', placeholder: 'Start' %>
            <span class="input-group-addon">to</span>
            <%= f.text_field :end_date, class: 'input-sm form-control datepicker', placeholder: 'End' %>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <%= f.submit 'Create booking', class: 'btn btn-primary' %>
        </div>
      </div><!-- /.modal-content -->
    <% end %>
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<script>
  $('.btn-form').on('click', function () {
    var date = $(this).data('date');
    $('#start_date_input').val(date);
    $('.modal').modal();
  })
  $(".datepicker").datepicker({ 
    startDate: '1d',
    format: 'yyyy-mm-dd',
    weekStart: 1
  })
</script>
